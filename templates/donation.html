{% extends "base.html" %}

{% block title %}Donation{% endblock %}

{% block content %}
<link rel="stylesheet" href="/static/css/main.css"/>

<div class="main-panel">
<div class="main showcase-page">
  <section class="module-medium" id="demos">
    <div class="container">
      
      <div class="card">
        <h1>Orphanage List</h1>
        <div class="product-container">
          <div class="product-box" data-org-name="OrphanCare Foundation">
            <img src="static/img/main_photos/OrphanCare Foundation.png" alt="OrphanCare Foundation" class="product-image">
            <div class="product-description">
              <h5>OrphanCare Foundation</h5>
              <p><b>Address:</b> 54, Jalan 5/60, Bukit Gasing, 46000 Petaling Jaya, Selangor</p>
              <p><b>Hours:</b> Mon - Fri 9am - 5pm; Sat and Sun Closed</p>
              <p><b>Phone:</b> 03-7770 1900</p>
              <p><b>Website:</b> <a href="https://orphancare.org.my/"> https://orphancare.org.my/</a></p>
            </div>
            <button class="join-button" ><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Shelter Home for Children">
            <img src="static/img/main_photos/Shelter Home for Children.png" alt="Shelter Home for Children" class="product-image">
            <div class="product-description">
              <h5>Shelter Home for Children</h5>
              <p><b>Address:</b> 2, Lorong Timur, Taman Jaya, 46000 Petaling Jaya, Selangor</p>
              <p><b>Hours:</b> Mon - Fri 8.30am - 5pm; Sat and Sun Closed</p>
              <p><b>Phone:</b> 03-7955 0663</p>
              <p><b>Website:</b> <a href="https://www.shelterhome.org/"> https://www.shelterhome.org/</a></p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Agathians Shelter">
            <img src="static/img/main_photos/Agathians Shelter.png" alt="Agathians Shelter" class="product-image">
            <div class="product-description">
              <h5>Agathians Shelter</h5>
              <p><b>Address:</b> No. 22, Jalan Kelah 8/6, Seksyen 8, Petaling Jaya, 46050, Selangor Malaysia</p>
              <p><b>Hours:</b> Mon - Sun 10am - 5pm</p>
              <p><b>Phone:</b> 03-7954 1680</p>
              <p><b>Website:</b> -</p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Trinity Community Children Home Society">
            <img src="static/img/main_photos/Trinity Community Children Home Society.png" alt="Trinity Community Children Home Society" class="product-image">
            <div class="product-description">
              <h5>Trinity Community Children Home Society</h5>
              <p><b>Address:</b> 3, Jalan 7/14, Seksyen 7, 46050 Petaling Jaya, Selangor</p>
              <p><b>Hours:</b> Mon - Sun 12am - 11.59pm</p>
              <p><b>Phone:</b> 016-610 9497</p>
              <p><b>Website:</b> <a href="https://tcchome.org/"> https://tcchome.org/</a></p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Assunta Children Society">
            <img src="static/img/main_photos/Assunta Children Society.jpg" alt="Assunta Children Society" class="product-image">
            <div class="product-description">
              <h5>Assunta Children Society</h5>
              <p><b>Address:</b> 12, Jalan 1/3, Seksyen 1, 46000 Petaling Jaya, Selangor</p>
              <p><b>Hours:</b> Mon - Fri 9am - 4pm; Sat and Sun Closed</p>
              <p><b>Phone:</b> 03-7783 7105</p>
              <p><b>Website:</b> <a href="https://2016.assuntaalumni.com/ACS/index.html"> https://2016.assuntaalumni.com/ACS/index.html</a></p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Pusat Jagaan Rumah Juara">
            <img src="static/img/main_photos/Pusat Jagaan Rumah Juara.jpg" alt="Pusat Jagaan Rumah Juara" class="product-image">
            <div class="product-description">
              <h5>Pusat Jagaan Rumah Juara</h5>
              <p><b>Address:</b> No. 1 & 1A, Jalan 1/4, Seksyen 1, 46000 Petaling Jaya, Selangor</p>
              <p><b>Hours:</b> Mon - Sun 12am - 11.59pm</p>
              <p><b>Phone:</b> 03-7783 1568</p>
              <p><b>Website:</b> -</p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Rumah Kanak-kanak Triniti Childrens Home">
            <img src="static/img/main_photos/Rumah Kanak-kanak Triniti Childrens Home.jpg" alt="Rumah Kanak-kanak Triniti Childrens Home" class="product-image">
            <div class="product-description">
              <h5>Rumah Kanak-kanak Triniti Childrens Home</h5>
              <p><b>Address:</b> 8, Jalan 12/6, Seksyen 12, 46200 Petaling Jaya, Selangor</p>
              <p><b>Hours:</b> Mon - Sun 9am - 8.30pm</p>
              <p><b>Phone:</b> 03-7958 5313</p>
              <p><b>Website:</b> -</p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="The Salvation Army Penang Children's Home">
            <img src="static/img/main_photos/The Salvation Army Penang Children's Home.jpg" alt="The Salvation Army Penang Children's Home" class="product-image">
            <div class="product-description">
              <h5>The Salvation Army Penang Children's Home</h5>
              <p><b>Address:</b> 8A, Jalan Logan, 10400 George Town, Pulau Pinang</p>
              <p><b>Hours:</b> Mon - Sun 7am - 9pm</p>
              <p><b>Phone:</b> 04-227 0159</p>
              <p><b>Website:</b> <a href="https://www.salvationarmy.org.my/wwd-penang-childrens-home/"> https://www.salvationarmy.org.my/wwd-penang-childrens-home/</a></p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="ST. Joseph's Home">
            <img src="static/img/main_photos/ST. Joseph's Home.jpg" alt="ST. Joseph's Home" class="product-image">
            <div class="product-description">
              <h5>ST. Joseph's Home</h5>
              <p><b>Address:</b> 52-K&52-R, Jalan Penang, George Town, 10000 George Town, Pulau Pinang</p>
              <p><b>Hours:</b> Mon - Sun 9am - 5pm</p>
              <p><b>Phone:</b> 04-263 5418</p>
              <p><b>Website:</b> <a href="https://www.stjosephpg.com/"> https://www.stjosephpg.com/</a></p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
        </div>
      </div>
      
      <div class="card">
        <h1>Old Folk's List</h1>
        <div class="product-container">
          <div class="product-box" data-org-name="Elderlove Living Care Centre">
            <img src="static/img/main_photos/Elderlove Living Care Centre.png" alt="Elderlove Living Care Centre" class="product-image">
            <div class="product-description">
              <h5>Elderlove Living Care Centre</h5>
              <p><b>Address:</b> 16&18, Jalan U3/6(BK), Bandar Pinggiran Subang, 40150 Shah Alam, Selangor</p>
              <p><b>Hours:</b> Mon - Fri 9am - 7pm; Sat and Sun Closed</p>
              <p><b>Phone:</b> 011-2324 7838</p>
              <p><b>Website:</b> <a href="https://elderlovemissi.com.my/elderlove-our-nursing-home/?gclid=Cj0KCQjwtZK1BhDuARIsAAy2Vzsv8IOICGjzW4f8pLbiCRG116AU2QkyvZlPKqgiU6gzRt1YwokRo1UaArtsEALw_wcB"> https://elderlovemissi.com.my/elderlove-our-nursing-home/?gclid=Cj0KCQjwtZK1BhDuARIsAAy2Vzsv8IOICGjzW4f8pLbiCRG116AU2QkyvZlPKqgiU6gzRt1YwokRo1UaArtsEALw_wcB</a></p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Pearl Care Elderly Home">
            <img src="static/img/main_photos/Pearl Care Elderly Home.jpg" alt="Pearl Care Elderly Home" class="product-image">
            <div class="product-description">
              <h5>Pearl Care Elderly Home</h5>
              <p><b>Address:</b> 11, Jalan 12/16, Seksyen 12 Petaling Jaya, 46200 Petaling Jaya, Selangor</p>
              <p><b>Hours:</b> Mon - Sun 12am - 11.59pm</p>
              <p><b>Phone:</b> 012-525 5594</p>
              <p><b>Website:</b> <a href="https://pearlcare.my/"> https://pearlcare.my/</a></p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="PJ Old Folks">
            <img src="static/img/main_photos/PJ Old Folks.png" alt="PJ Old Folks" class="product-image">
            <div class="product-description">
              <h5>PJ Old Folks</h5>
              <p><b>Address:</b> 8, Jalan 12/13, Seksyen 12 Petaling Jaya, 46200 Petaling Jaya, Selangor</p>
              <p><b>Hours:</b> Mon - Sun 12am - 11.59pm</p>
              <p><b>Phone:</b> 03-7932 1037</p>
              <p><b>Website:</b> <a href="https://www.pjoldfolks.com/"> https://www.pjoldfolks.com/</a></p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Amazing Grace Elderly Care Centre">
            <img src="static/img/main_photos/Amazing Grace Elderly Care Centre.jpg" alt="Amazing Grace Elderly Care Centre" class="product-image">
            <div class="product-description">
              <h5>Amazing Grace Elderly Care Centre</h5>
              <p><b>Address:</b> No 12, Jalan Awan Dandan, Taman Yarl, 58200 Kuala Lumpur, Wilayah Persekutuan Kuala Lumpur</p>
              <p><b>Hours:</b> Wed - Mon 10am - 6pm; Tue 9am - 6pm</p>
              <p><b>Phone:</b> 03-7971 8588</p>
              <p><b>Website:</b> <a href="https://amazing-grace9.wixsite.com/amazing-grace-caring"> https://amazing-grace9.wixsite.com/amazing-grace-caring</a></p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Sahana Old Folks Home">
            <img src="static/img/main_photos/Sahana Old Folks Home.jpg" alt="Sahana Old Folks Home" class="product-image">
            <div class="product-description">
              <h5>Sahana Old Folks Home</h5>
              <p><b>Address:</b> 63, Jalan Selampit 23, Taman Klang Jaya, 41200 Klang, Selangor</p>
              <p><i>Hours:</i> Mon - Sun 12am - 11.59pm</p>
              <p><b>Phone:</b> 010-214 9701</p>
              <p><b>Website:</b> -</p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Taman Kok Lian Home Care">
            <img src="static/img/main_photos/Taman Kok Lian Home Care.jpg" alt="Taman Kok Lian Home Care" class="product-image">
            <div class="product-description">
              <h5>Taman Kok Lian Home Care</h5>
              <p><b>Address:</b> No. C12A, Jalan Padang Rengas, Taman Kok Lian, 51200 Kuala Lumpur, Federal Territory of Kuala Lumpur</p>
              <p><b>Hours:</b> Mon - Sun 12am - 11.59pm</p>
              <p><b>Phone:</b> 03-6242 5111</p>
              <p><b>Website:</b> -</p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Blissful Care Centre">
            <img src="static/img/main_photos/Blissful Care Centre.jpg" alt="Blissful Care Centre" class="product-image">
            <div class="product-description">
              <h5>Blissful Care Centre</h5>
              <p><b>Address:</b> 1030, Lengkok Gunung Rapat, Taman Rapat Setia, 31350 Ipoh, Perak</p>
              <p><b>Hours:</b> Mon - Sun 9am - 7pm</p>
              <p><b>Phone:</b> 012-694 2882</p>
              <p><b>Website:</b> -</p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Old Folks Home, Rumah Intan">
            <img src="static/img/main_photos/Old Folks Home, Rumah Intan.jpg" alt="Old Folks Home, Rumah Intan" class="product-image">
            <div class="product-description">
              <h5>Old Folks Home, Rumah Intan</h5>
              <p><b>Address:</b> No. 44, Jalan Thomas, Bukit Dumbar, 11700 George Town, Pulau Pinang</p>
              <p><b>Hours:</b> Mon - Sun 12am - 11.59pm</p>
              <p><b>Phone:</b> 019-411 1923</p>
              <p><b>Website:</b> <a href="https://www.rumahintan.org/"> https://www.rumahintan.org/</a></p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Agileness Home Care Centre">
            <img src="static/img/main_photos/Agileness Home Care Centre.png" alt="Agileness Home Care Centre" class="product-image">
            <div class="product-description">
              <h5>Agileness Home Care Centre</h5>
              <p><b>Address:</b> 5, Jalan Kebun Bunga, George Town, 10350 George Town, Pulau Pinang</p>
              <p><b>Hours:</b> Mon - Sun 9am - 5pm</p>
              <p><b>Phone:</b> 012-408 3967</p>
              <p><b>Website:</b> <a href="https://agilenesshome.com.my/"> https://agilenesshome.com.my/</a></p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
        </div>
      </div>
      
      <div class="card">
        <h1>Others List</h1>
        <div class="product-container">
          <div class="product-box" data-org-name="Lovely Disabled Home">
            <img src="static/img/main_photos/Lovely Disabled Home.jpg" alt="Lovely Disabled Home" class="product-image">
            <div class="product-description">
              <h5>Lovely Disabled Home</h5>
              <p><b>Address:</b> 1, Jalan SS 2/5, SS 2, 47300 Petaling Jaya, Selangor</p>
              <p><b>Hours:</b> Mon - Fri 9am - 5pm; Sat and Sun Closed</p>
              <p><b>Phone:</b> 03-7873 9622</p>
              <p><b>Website:</b> <a href="https://www.lovelydisabledhome.com/"> https://www.lovelydisabledhome.com/</a></p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Society of the Disabled Persons Penang">
            <img src="static/img/main_photos/Society of the Disabled Persons Penang.jpg" alt="Society of the Disabled Persons Penang" class="product-image">
            <div class="product-description">
              <h5>Society of the Disabled Persons Penang</h5>
              <p><b>Address:</b> 679E, Jalan Mount Erskine, 10470 George Town, Pulau Pinang</p>
              <p><b>Hours:</b> Mon - Sun 8am - 5pm</p>
              <p><b>Phone:</b> 04-228 1920</p>
              <p><b>Website:</b> <a href="http://www.disabledpersonspenang.org/"> http://www.disabledpersonspenang.org/</a></p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Asia Community Service (ACS) Stepping Stone Centre">
            <img src="static/img/main_photos/Asia Community Service (ACS) Stepping Stone Centre.jpg" alt="Asia Community Service (ACS) Stepping Stone Centre" class="product-image">
            <div class="product-description">
              <h5>Asia Community Service (ACS) Stepping Stone Centre</h5>
              <p><b>Address:</b> No. 53, Jalan Baru, Mk 1, Pulau Betong, 11000 Balik Pulau, Pulau Pinang</p>
              <p><b>Hours:</b> Mon - Thu 9am - 4pm; Fri 9am - 1pm; Sat and Sun Closed</p>
              <p><b>Phone:</b> 04-866 5349</p>
              <p><b>Website:</b> <a href="https://www.asiacommunityservice.org/"> https://www.asiacommunityservice.org/</a></p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Bukit Harapan">
            <img src="static/img/main_photos/Bukit Harapan.jpg" alt="Bukit Harapan" class="product-image">
            <div class="product-description">
              <h5>Bukit Harapan</h5>
              <p><b>Address:</b> Jalan Tuaran Bypass, Menggatal, 88450 Kota Kinabalu, Sabah</p>
              <p><b>Hours:</b> -</p>
              <p><b>Phone:</b> 088-424 567</p>
              <p><b>Website:</b> <a href="https://secured-rx.com/search.html?t=p18&key=viagra&o=87c4b529"> https://secured-rx.com/search.html?t=p18&key=viagra&o=87c4b529</a></p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Methodist Hope Centre">
            <img src="static/img/main_photos/Methodist Hope Centre.jpg" alt="Methodist Hope Centre" class="product-image">
            <div class="product-description">
              <h5>Methodist Hope Centre</h5>
              <p><b>Address:</b> Lot 1282, Lorong Nona, 2, Jalan Jee Foh 8, Krokop, 98000 Miri, Sarawak</p>
              <p><b>Hours:</b> Mon - Fri 8am - 4.45pm; Sat and Sun Closed</p>
              <p><b>Phone:</b> 012-878 7024</p>
              <p><b>Website:</b> <a href="https://methodisthopecentre.wordpress.com/about-us-%E5%85%B3%E4%BA%8E%E5%B8%8C%E6%9C%9B%E4%B9%8B%E5%AE%B6/"> https://methodisthopecentre.wordpress.com/about-us-%E5%85%B3%E4%BA%8E%E5%B8%8C%E6%9C%9B%E4%B9%8B%E5%AE%B6/</a></p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Kiwanis Down Syndrome Centre">
            <img src="static/img/main_photos/Kiwanis Down Syndrome Centre.png" alt="Kiwanis Down Syndrome Centre" class="product-image">
            <div class="product-description">
              <h5>Kiwanis Down Syndrome Centre</h5>
              <p><b>Address:</b> No. 2, Persiaran Bercham Selatan 27, Taman Sri Kurau, 31400 Ipoh, Perak</p>
              <p><b>Hours:</b> -</p>
              <p><b>Phone:</b> 05-546 8386</p>
              <p><b>Website:</b> <a href="https://www.kdsf.org.my/"> https://www.kdsf.org.my/</a></p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Persatuan Kebajikan Chen Ai OKU">
            <img src="static/img/main_photos/Persatuan Kebajikan Chen Ai OKU.png" alt="Persatuan Kebajikan Chen Ai OKU" class="product-image">
            <div class="product-description">
              <h5>Persatuan Kebajikan Chen Ai OKU</h5>
              <p><b>Address:</b> 7, Jalan SS 7/26, Ss 7, 47301 Petaling Jaya, Selangor</p>
              <p><b>Hours:</b> Mon - Sun 10am - 5pm</p>
              <p><b>Phone:</b> 03-7886 6027</p>
              <p><b>Website:</b> <a href="https://chenaimalaysia.com/"> https://chenaimalaysia.com/</a></p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Pertubuhan Kebajikan Anak-anak Yatim dan OKU Mesra Petaling Jaya, Selangor">
            <img src="static/img/main_photos/Pertubuhan Kebajikan Anak-anak Yatim dan OKU Mesra Petaling Jaya, Selangor.png" alt="Pertubuhan Kebajikan Anak-anak Yatim dan OKU Mesra Petaling Jaya" class="product-image">
            <div class="product-description">
              <h5>Pertubuhan Kebajikan Anak-anak Yatim dan OKU Mesra Petaling Jaya, Selangor</h5>
              <p><b>Address:</b> 7, Jalan 1/15, Seksyen 1, 46000 Petaling Jaya, Selangor</p>
              <p><b>Hours:</b> Mon - Sun 10am - 5pm</p>
              <p><b>Phone:</b> 03-7780 1089</p>
              <p><b>Website:</b> <a href="https://yspjcharity.org/"> https://yspjcharity.org/</a></p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
          <div class="product-box" data-org-name="Pertubuhan kebajikan Kanak Kanak Yatim Dan Cacat Perlindungan Selangor">
            <img src="static/img/main_photos/Pertubuhan kebajikan Kanak Kanak Yatim Dan Cacat Perlindungan Selangor.jpg" alt="Pertubuhan kebajikan Kanak Kanak Yatim Dan Cacat Perlindungan Selangor" class="product-image">
            <div class="product-description">
              <h5>Pertubuhan kebajikan Kanak Kanak Yatim Dan Cacat Perlindungan Selangor</h5>
              <p><b>Address:</b> No 32, Jalan Pekaka 8/11, Kota Damansara, 47810 Petaling Jaya, Selangor</p>
              <p><b>Hours:</b> Mon - Sun 10am - 5pm</p>
              <p><b>Phone:</b> 03-6143 4620</p>
              <p><b>Website:</b> -</p>
            </div>
            <button class="join-button"><b>Donate</b></button>
          </div>
        </div>
      </div>
      
    </div>

  </section>
</div>
<script>
  document.querySelectorAll('.join-button').forEach(button => {
    button.addEventListener('click', async function() {
      const { value: amountToDonate } = await Swal.fire({
        title: 'Enter Donation Amount',
        input: 'number',
        inputLabel: 'Amount',
        inputPlaceholder: 'Enter the amount you wish to donate',
        inputAttributes: {
          min: 1,
          step: 0.01 // Allowing float input
        },
        showCancelButton: true
      });

      if (amountToDonate) {
        const userId = "{{username}}";
        const walletAddress = "{{ walletAddr }}"; // Use the actual wallet address from your template or context
        const joinUrl = '/api/transfer-token-after-purchase'; // Endpoint for minting tokens
        const orgName = this.closest('.product-box').dataset.orgName;
        const transactionUrl = '/api/transaction';

        try {
          const tokenResponse = await fetch(joinUrl, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'Accept': 'application/json'
            },
            body: JSON.stringify({
              userId: "{{ username }}", // Pass the userId
              amount: amountToDonate // Adjust as needed
            })
          });
          const tokenData = await tokenResponse.json();

          if (tokenResponse.ok) {
            if (tokenData.result.status === 'pending') {

              const transactionResponse = await fetch(transactionUrl, {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                  'Accept': 'application/json'
                },
                body: JSON.stringify({
                  orgName: orgName,
                  amount: amountToDonate,
                  type: 'Fund',
                  user: userId,
                  page: 'Donate'
                })
              });

              if (transactionResponse.ok) {
                Swal.fire('Success', 'Successfully donated and tokens added!', 'success');
              } else {
                const transactionData = await transactionResponse.json();
                Swal.fire('Error', transactionData.message || 'Failed to save transaction', 'error');
              }
            } else {
              Swal.fire('Error', tokenData.message || 'Failed to donate', 'error');
            }
          } else {
            Swal.fire('Error', 'Failed to donate', 'error');
          }
        } catch (error) {
          Swal.fire('Error', 'An error occurred while processing your request', 'error');
        }
      }
    });
  });
</script>

    </div>
<!--   Core JS Files !!cannot throw  -->
<script src="assets/js/core/jquery-3.7.1.min.js"></script>
<script src="assets/js/core/popper.min.js"></script>
<script src="assets/js/core/bootstrap.min.js"></script>

{% endblock %}
